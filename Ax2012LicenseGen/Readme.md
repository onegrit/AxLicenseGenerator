# License generator for AX 2012
##v1.1

This application was created to abstract the [axutil](https://technet.microsoft.com/en-us/library/hh456294.aspx) command line (See *genlicense* flag) into a UI. 

This keeps the things like location of the License file (pfx) and the password abstracted from the user and gets set in the configuration file (Settings.xml)

##Running the application
Download the release file and you will have a couple of files included in this.

* **Ax2012LicenseGen.exe** This is the executable file to run the License generator
* **Ax2012LicenseGen.exe.config** This file is for the application config. there is nothing stored in this file apart from .Net based information
* **Settings.xml** This is where the configuration is saved from the UI. The only configuration that needs to be set is *OutfilePrefix*. this file can be deleted and it will be recreated.

##Contents of Settings.xml
Example of the file Settings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Settings xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <CertificatePath>RTpcVGVtcDRcdHR0dC5wZng=</CertificatePath>
  <AxUtilLocation>D:\preload</AxUtilLocation>
  <DefaultOutPath>E:\Temp4\</DefaultOutPath>
  <CertificatePassword>MTIzMTIz</CertificatePassword>
  <OutfilePrefix>LIC</OutfilePrefix>
</Settings>
```

* **CertificatePath** This defined the location of the pfx file. The data stored is in base64 encoding
* **AxUtilLocation** This is the folder where the location of the axutil.exe is stored. The idea to keep it as a folder is so that you can run this across different environemnts using the same settings file
* **DefaultOutputPath** This is where the license file is store after generation
* **CertificatePassword** Password of the certificate required by AxUtil
* **OutfilePrefix** When generating the license, the file name is changed based on the customer, module, etc. The prefix adds a constant to the file naming sequence. The file name cna be changed in the UI

## User interface
![UI For License generator v1.1](https://shashidotnet.files.wordpress.com/2016/04/licgenerator_v1-1.png)

* **Customer** This information comes from the Ax Client license form
* **Serial#** This information also comes from the Ax Client license form
* **License Code** This is the information of the Module to be licensed
* **Output path** This is autogenerated with the dorectory from the settings. Any changes to this text box doesnt make changes to the settings file. If the default output location is to be changed, use the elipse to select the folder, or manually change it in the Settings.xml file
* **Certificate Path** This is the location of the pfx file. Use the elipse to change the value
* **Password** This is the password for the Ceritifcate which allows to create a license file
* **AxUtil Location** Use the Elipse to set the directory of the AxUtil.exe file
* **License Expires?** Set the License's expiry date if needed
* **User count** Set the value to 0 for unlimited users. This feature is not valid for all versions of Ax, even though it was made available

## Under the hood
The command to create a license file is something like this

'''
axutil genlicense /file:c:\licenses\MyLicense.txt /certificatepath:c:\certificates\MyCertificate.pfx /licenseCode:MyModule /customer:MyCustomer /serialnumber:1231232123 /password:MySecretPassword123
'''

or 

'''
axutil genlicense /file:c:\licenses\MyLicense.txt /certificatepath:c:\certificates\MyCertificate.pfx /licenseCode:MyModule /customer:MyCustomer /serialnumber:1231232123 /password:MySecretPassword123 /expirationdate:12/30/2018 /usercount:5
'''
(expirtationdate and usercount flags are optional)

This tool converts the settings and the values in the UI and runs it as a command as per above. 

##Known issues
* If there is something wrong with the command, the error is not captured as this is not something that can be done at this stage.
* You cannot just enter the folder in the text box to save it. Also the elipse icon may not allow you to browse to a network path. This will need to be set via the Settings.xml file directly
